import{R as E,j as e,r as m}from"./index-BaOjgHAy.js";import{F as t,M as j,B as o,I as s,g as p,s as x,f,S as M}from"./axios-kpf6Pe3Z.js";const R=({visible:u,onClose:n,product:i})=>{const[l]=t.useForm();E.useEffect(()=>{i&&l.setFieldsValue({image:i.image,title_tm:i.title_tm,title_en:i.title_en,title_ru:i.title_ru,short_tm:i.short_tm,short_en:i.short_en,short_ru:i.short_ru,desc_tm:i.desc_tm,desc_en:i.desc_en,desc_ru:i.desc_ru})},[i,l]);const a=()=>{l.validateFields().then(c=>{l.resetFields(),console.log("Updated values: ",c),n()}).catch(c=>{console.log("Validate Failed:",c)})};return e.jsx(j,{title:"Edit Product",visible:u,onOk:a,onCancel:n,footer:[e.jsx(o,{onClick:n,children:"Cancel"},"back"),e.jsx(o,{type:"primary",onClick:a,children:"Submit"},"submit")],width:"100%",style:{top:0},children:e.jsxs(t,{form:l,layout:"vertical",children:[e.jsx(t.Item,{name:"image",label:"Image URL",rules:[{required:!0,message:"Please input the image URL!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_tm",label:"Title (TM)",rules:[{required:!0,message:"Please input the title in TM!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_en",label:"Title (EN)",rules:[{required:!0,message:"Please input the title in EN!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_ru",label:"Title (RU)",rules:[{required:!0,message:"Please input the title in RU!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"short_tm",label:"Short Description (TM)",rules:[{required:!0,message:"Please input the short description in TM!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"short_en",label:"Short Description (EN)",rules:[{required:!0,message:"Please input the short description in EN!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"short_ru",label:"Short Description (RU)",rules:[{required:!0,message:"Please input the short description in RU!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"desc_tm",label:"Description (TM)",rules:[{required:!0,message:"Please input the description in TM!"}],children:e.jsx(s.TextArea,{rows:4})}),e.jsx(t.Item,{name:"desc_en",label:"Description (EN)",rules:[{required:!0,message:"Please input the description in EN!"}],children:e.jsx(s.TextArea,{rows:4})}),e.jsx(t.Item,{name:"desc_ru",label:"Description (RU)",rules:[{required:!0,message:"Please input the description in RU!"}],children:e.jsx(s.TextArea,{rows:4})})]})})},D=({visible:u,onClose:n})=>{const[i]=t.useForm(),l=()=>{i.validateFields().then(a=>{i.resetFields(),console.log("Received values: ",a),n()}).catch(a=>{console.log("Validate Failed:",a)})};return e.jsx(j,{title:"Add Product",visible:u,onOk:l,onCancel:n,footer:[e.jsx(o,{onClick:n,children:"Cancel"},"back"),e.jsx(o,{type:"primary",onClick:l,children:"Submit"},"submit")],width:"100%",style:{top:0},children:e.jsxs(t,{form:i,layout:"vertical",children:[e.jsx(t.Item,{name:"image",label:"Image URL",rules:[{required:!0,message:"Please input the image URL!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_tm",label:"Title (TM)",rules:[{required:!0,message:"Please input the title in TM!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_en",label:"Title (EN)",rules:[{required:!0,message:"Please input the title in EN!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"title_ru",label:"Title (RU)",rules:[{required:!0,message:"Please input the title in RU!"}],children:e.jsx(s,{})}),e.jsx(t.Item,{name:"short_tm",label:"Short Description (TM)",rules:[{required:!0,message:"Please input the short description in TM!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"short_en",label:"Short Description (EN)",rules:[{required:!0,message:"Please input the short description in EN!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"short_ru",label:"Short Description (RU)",rules:[{required:!0,message:"Please input the short description in RU!"}],children:e.jsx(s.TextArea,{rows:2})}),e.jsx(t.Item,{name:"desc_tm",label:"Description (TM)",rules:[{required:!0,message:"Please input the description in TM!"}],children:e.jsx(s.TextArea,{rows:4})}),e.jsx(t.Item,{name:"desc_en",label:"Description (EN)",rules:[{required:!0,message:"Please input the description in EN!"}],children:e.jsx(s.TextArea,{rows:4})}),e.jsx(t.Item,{name:"desc_ru",label:"Description (RU)",rules:[{required:!0,message:"Please input the description in RU!"}],children:e.jsx(s.TextArea,{rows:4})})]})})},S=()=>{const[u,n]=m.useState([]),[i,l]=m.useState(!1),[a,c]=m.useState(!1),[g,y]=m.useState(null);m.useEffect(()=>{_()},[]);const _=async()=>{try{const h=(await p.get("http://95.85.121.153:5634/product/product-by-group?group=2")).data.map(r=>({key:r.id,image:r.image,title_tm:r.title_tm,title_en:r.title_en,title_ru:r.title_ru,short_tm:r.short_tm,short_en:r.short_en,short_ru:r.short_ru,desc_tm:r.desc_tm,desc_en:r.desc_en,desc_ru:r.desc_ru,id:r.id}));n(h)}catch{x.error("Failed to fetch products")}},I=()=>{l(!0)},T=d=>{y(d),c(!0)},b=async d=>{try{await p.delete(`http://95.85.121.153:5634/product/${d}`),x.success("Product deleted successfully"),_()}catch{x.error("Failed to delete product")}},P=()=>{l(!1)},w=()=>{c(!1)},k=[{title:"Image",dataIndex:"image",key:"image",render:d=>e.jsx("img",{src:d,alt:"product",style:{width:50,height:50}}),width:100},{title:"Title (TM)",dataIndex:"title_tm",key:"title_tm",width:150},{title:"Title (EN)",dataIndex:"title_en",key:"title_en",width:150},{title:"Title (RU)",dataIndex:"title_ru",key:"title_ru",width:150},{title:"Short Description (TM)",dataIndex:"short_tm",key:"short_tm",width:200},{title:"Short Description (EN)",dataIndex:"short_en",key:"short_en",width:200},{title:"Short Description (RU)",dataIndex:"short_ru",key:"short_ru",width:200},{title:"Description (TM)",dataIndex:"desc_tm",key:"desc_tm",width:300},{title:"Description (EN)",dataIndex:"desc_en",key:"desc_en",width:300},{title:"Description (RU)",dataIndex:"desc_ru",key:"desc_ru",width:300},{title:"Action",key:"operation",fixed:"right",width:150,render:(d,h)=>e.jsxs(M,{size:"middle",children:[e.jsx(o,{type:"link",onClick:()=>T(h),children:"Edit"}),e.jsx(o,{type:"link",danger:!0,onClick:()=>b(h.key),children:"Delete"})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h2",{children:"Products"}),e.jsx(o,{type:"primary",onClick:I,style:{float:"right"},children:"Add Product"})]}),e.jsx(f,{columns:k,dataSource:u,scroll:{x:1200,y:300},pagination:{pageSize:10}}),e.jsx(D,{visible:i,onClose:P}),e.jsx(R,{visible:a,onClose:w,product:g})]})};export{S as default};
